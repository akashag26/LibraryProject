<%= stylesheet_link_tag 'rooms' %>


    <%= form_tag rooms_show_schedule_path, :method => 'get' do %>
        <p>
          <%= label_tag :schedule_date, 'Select a Date' %>
          <%= text_field_tag :schedule_date, params[:dateField] %>

          <%= submit_tag "Search", :name => nil %>
        </p>
    <% end %>


<h1>Listing Room Schedule for: <%= @date_selected %> </h1>

<table align="center">
  <thead>
  <tr>
    <th>Room No</th>
    <th>10:00 - 12:00</th>
    <th>12:00 - 2:00</th>
    <th>2:00 - 4:00</th>
    <th>4:00 - 6:00</th>
    <th>6:00 - 8:00</th>
    <th>8:00 - 10:00</th>
  </tr>
  </thead>

  <tbody>
  <% @rooms.each do |room| %>
     <%@room=room%>
      <tr>
        <th scope="row"><%= room.room_no %></th>
            <%@booking=Booking.find_by(room_no: room.room_no ,booking_date: (@date_selected), start_time: "10:00" )%>
            <%if @booking != nil%>
                <td><%="Booked"%></td>
            <%else%>
                <td><%= link_to "Available", {:controller => "bookings", :action => "new0", :id => 8, :date => (Date.current())}%></td>
            <%end%>
        <%@booking=Booking.find_by(room_no: room.room_no ,booking_date: (@date_selected), start_time: "12:00" )%>
        <%if @booking != nil%>
            <td><%="Booked"%></td>
        <%else%>
            <td><%= link_to "Available", {:controller => "bookings", :action => "new1", :id => @room.id, :date => (Date.current())} %></td>
        <%end%>
        <%@booking=Booking.find_by(room_no: room.room_no ,booking_date: (@date_selected), start_time: "2:00" )%>
        <%if @booking != nil%>
            <td><%="Booked"%></td>
        <%else%>
            <td><%= link_to "Available" , {:controller => "bookings", :action => "new2", :id => @room.id, :date => (Date.current())}%></td>
        <%end%>
        <%@booking=Booking.find_by(room_no: room.room_no ,booking_date: (@date_selected), start_time: "4:00" )%>
        <%if @booking != nil%>
            <td><%="Booked"%></td>
        <%else%>
            <td><%= link_to "Available", {:controller => "bookings", :action => "new3", :id => @room.id, :date => (Date.current())} %></td>
        <%end%>
        <%@booking=Booking.find_by(room_no: room.room_no ,booking_date: (@date_selected), start_time: "6:00" )%>
        <%if @booking != nil%>
            <td><%="Booked"%></td>
        <%else%>
            <td><%= link_to "Available" , {:controller => "bookings", :action => "new4", :id => @room.id, :date => (Date.current())}%></td>
        <%end%>
        <%@booking=Booking.find_by(room_no: room.room_no ,booking_date: (@date_selected), start_time: "8:00" )%>
        <%if @booking != nil%>
            <td><%="Booked"%></td>
        <%else%>
            <td><%= link_to "Available", {:controller => "bookings", :action => "new5", :id => @room.id, :date => (Date.current())} %></td>
        <%end%>
      </tr>
  <% end %>
  </tbody>
</table>

<br>

