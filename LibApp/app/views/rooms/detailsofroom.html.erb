<% provide(:title, 'Room Detail') %>
<h3>Room Detail</h3>
<div class="row">
  <div class="col-md-6 col-md-offset-3">
    <%= form_for(@room) do |f| %>
        <%= render 'rooms/error_messages' %>

        <%= f.label "Room no" %>
        <%= f.text_field :room_no,   class: 'form-control',:readonly => true %>

        <%= f.label :size %>
        <%= f.text_field :size,  class: 'form-control',:readonly => true %>

        <%= f.label :building %>
        <%= f.text_field :building,  class: 'form-control',:readonly => true %>

        <%= f.label :Status %>

    <table style="width:100%">
      <caption>Reservation Details</caption>
      <tr>
        <th></th>
        <th  style="width:50px;"><%=  Date.current() %></th>
        <th><%=  Date.current()+1 %></th>
        <th><%=  Date.current()+2 %></th>
        <th><%=  Date.current()+3 %></th>
        <th><%=  Date.current()+4%></th>
        <th><%=  Date.current()+5 %></th>
        <th><%=  Date.current()+6 %></th>
      </tr>
      <tr>
        <th scope="row">10:00 - 12:00</th>
        <%[0,1,2,3,4,5,6].each do |d|%>
        <%@booking=Booking.find_by(room_no: @room.room_no ,booking_date: (Date.current()+d), start_time: "10:00" )%>
        <%if @booking != nil%>
        <td><%=@booking.user%></td>
            <%else%>
            <td><%= link_to "Available", {:controller => "bookings", :action => "new0", :id => @room.id, :date => (Date.current()+d)} %></td>
            <%end%>
            <%end%>

      </tr>
      <tr>
        <th scope="row">12:00 - 2:00</th>
        <%[0,1,2,3,4,5,6].each do |d|%>
            <%@booking=Booking.find_by(room_no: @room.room_no ,booking_date: (Date.current()+d),start_time: "12:00" )%>
            <%if @booking != nil%>
                <td><%=@booking.user%></td>
            <%else%>
                <td><%= link_to "Available",{:controller => "bookings", :action => "new1", :id => @room.id,:date => (Date.current()+d)} %></td>
            <%end%>
        <%end%>
      </tr>
      <tr>
        <th scope="row">2:00 - 4:00</th>
        <%[0,1,2,3,4,5,6].each do |d|%>
            <%@booking=Booking.find_by(room_no: @room.room_no ,booking_date: (Date.current()+d),start_time: "2:00" )%>
            <%if @booking != nil%>
                <td><%=@booking.user%></td>
            <%else%>
                <td><%= link_to "Available",{:controller => "bookings", :action => "new2", :id => @room.id,:date => (Date.current()+d)} %></td>
            <%end%>
        <%end%>
      </tr>
      <tr>
        <th scope="row">4:00 - 6:00</th>
        <%[0,1,2,3,4,5,6].each do |d|%>
            <%@booking=Booking.find_by(room_no: @room.room_no ,booking_date: (Date.current()+d),start_time: "4:00" )%>
            <%if @booking != nil%>
                <td><%=@booking.user%></td>
            <%else%>
                <td style="width:50px;"><%= link_to "Available",{:controller => "bookings", :action => "new3", :id => @room.id,:date => (Date.current()+d)} %></td>
            <%end%>
        <%end%>
      </tr>
      <tr>
        <th scope="row">6:00 - 8:00</th>
        <%[0,1,2,3,4,5,6].each do |d|%>
            <%@booking=Booking.find_by(room_no: @room.room_no ,booking_date: (Date.current()+d),start_time: "6:00" )%>
            <%if @booking != nil%>
                <td><%=@booking.user%></td>
            <%else%>
                <td><%= link_to "Available",{:controller => "bookings", :action => "new4", :id => @room.id,:date => (Date.current()+d)} %></td>
            <%end%>
        <%end%>
      </tr>
      <tr>
        <th scope="row">8:00 - 10:00</th>
        <%[0,1,2,3,4,5,6].each do |d|%>
            <%@booking=Booking.find_by(room_no: @room.room_no ,booking_date: (Date.current()+d),start_time: "8:00" )%>
            <%if @booking != nil%>
                <td><%=@booking.user%></td>
            <%else%>
                <td><%= link_to "Available",{:controller => "bookings", :action => "new5", :id => @room.id,:date => (Date.current()+d)} %></td>
            <%end%>
        <%end%>
      </tr>
    </table>
        <%end%>
  </div>
</div>
